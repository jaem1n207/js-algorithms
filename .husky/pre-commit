# chmod +x .husky/pre-commit

#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

function updateCoverageBadge() {
  # staged ìƒíƒœì— .test.js íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
  if git diff --quiet --cached --name-only -- '*.test.js'
  then
    echo "No '*.test.js' files to commit. Skipping pre-commit hook."

    exit 0
  else
    pnpm test:badges
    ./scripts/update-coverage-badge.sh
    git add ./assets/badge-statements.svg

    printf "\n\n\033[1;33m%s\033[m\n" "ğŸ“  Test files are updated. Update coverage badge."
  fi
}

updateCoverageBadge